<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="{{url_for('static', filename='output.css')}}">
</head>
<body class="w-full h-screen flex flex-col justify-between dark:bg-linear-[45deg,_#090e14,_#112339,_#0d131f,_#090e14] bg-linear-[45deg,_#E3F2FD,_#BBDEFB,_#90CAF9,_#64B5F6] bg-(length:--bg-size) animate-background">
    <header>
        <ul class="w-full h-16 flex items-center justify-between bg-primary/20 text-white backdrop-blur-lg fixed top-0 z-10">
            <li class="ml-10 cascadia flex items-center"><img src="{{url_for('static',filename='img/logo-dino.svg')}}"
                    alt=""><a href="/" class="pl-2">Icone</a></li>
            <div class=" w-[480px] flex items-center justify-between  mr-10">
                <li class=" "><a href="/" class="hover:bg-secundary transition-all px-5 py-2 mx-3 rounded cascadia text-nowrap">About us</a>
                </li>
                <li class=""><a href="#juegos" class="hover:bg-secundary transition-all  px-5 py-2 mx-3 rounded cascadia">Juegos</a>
                </li>
                <li class=""><a href="/login" class="hover:bg-secundary transition-all p-3 mx-3 rounded text-nowrap cascadia">Log out</a>
                </li>
                <li>
                    <div class="relative flex justify-center items-center bg-sky-700 dark:bg-gray-800 p-1 rounded-full w-[140px]">
                        <!-- Indicador Deslizante con Sombra -->
                       
                        
                        <!-- Botones -->
                        <button id="system" class="theme-btn relative z-10 w-10 h-10 flex justify-center items-center text-gray-900 dark:text-white transition-colors duration-300">
                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25" />
                          </svg>
                          
                        </button>
                        <button id="light" class="theme-btn relative z-10 w-10 h-10 flex justify-center items-center text-gray-900 dark:text-white transition-colors duration-300" alt="">
                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-7">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z" />
                          </svg>
                          
                        </button >
                        <button id="dark" class="theme-btn relative z-10 w-10 h-10 flex justify-center items-center text-gray-900 dark:text-white transition-colors duration-300">
                          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z" />
                          </svg>
                          
                        </button>
                      </div>
                </li>
            </div>
        </ul>
    </header>
    <main>
      <div class="container mx-auto p-6 w-full flex flex-col justify-center items-center h-auto mt-20 overflow-hidden">
        <div class="w-full h-20 flex justify-evenly items-center">
          <a href="/dashboard" class="dark:text-white cascadia text-lg bg-secundary/80 hover:bg-secundary p-1 px-2 rounded-lg transition-all"> <- Volver </a>
          <h1 class="dark:text-white cascadia text-2xl font-bold">Lista de usuario</h1>
          <a href="/dashboard/productos/nuevo" class=""> </a>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 w-full justify-center items-center">
          {% for user in usuario %}
          <div class="bg-white dark:bg-secundary p-4 rounded-lg shadow-md w-auto flex items-center">
              <div class="flex flex-col w-4/5 "> 
                  <h2 class="text-2xl font-semibold mt-2 dark:text-white text-black cascadia">{{ user.username }}</h2>
                  <p class="dark:text-gray-600 text-lg cascadia">{{ user.email }}</p>
              </div>
              <div class="flex flex-col w-1/5 justify-center items-center">
                  <button onclick="openModal({{ user.id }})" class="w-10 h-10 flex justify-center items-center my-1 text-blue-500 hover:underline bg-sky-300 rounded-sm active:translate-y-1 transition-all">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                          <path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125" />
                      </svg>
                  </button>
                <div id="modal-{{ user.id }}" class="fixed inset-0 dark:bg-secundary hidden flex-col h-1/2 w-1/2 justify-center  items-center rounded-lg m-auto  py-4 px-3">
                  
                    <form action="{{ url_for('editar_usuario', id=user.id) }}" method="POST" class=" w-full h-full flex flex-col justify-evenly items-center">
                      <h2 class="text-2xl font-bold text-center text-gray-100 cascadia mb-4">Editar Usuario</h2>
                        <div class="w-full h-full">
                            <label for="username" class="block text-gray-100 font-medium cascadia">Editar nombre de usuario:</label>
                            <input type="text" id="username" name="username" value="{{ usuario.username }}" required
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 text-white outline-none cascadia">
                        </div>
                        <div class="w-full h-full">
                            <label for="email" class="block text-gray-100 font-medium cascadia">Editar Correo Electrónico:</label>
                            <input type="email" id="email" name="email" value="{{ usuario.email }}" required
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 text-white  outline-none cascadia">
                        </div>
                        <div class="flex justify-evenly w-full ">
                            <a href="{{ url_for('show_usuario') }}" class="text-white bg-red-500 rounded-lg py-2 px-4 hover:underline">Cancelar</a>
                            <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">Guardar</button>
                        </div>
                    </form>
                </div>
                  
                  
                  <!-- Botón para abrir el modal -->
                  <button onclick="openModal2({{ user.id }})" class="w-10 h-10 flex justify-center items-center my-1 text-red-500 hover:underline bg-rose-300 rounded-sm active:translate-y-1 transition-all">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                      </svg>
                  </button>
      
                  <!-- Modal para eliminar usuario -->
                  <div id="modal2-{{ user.id }}" class="fixed inset-0 bg-secundary/10 bg-opacity-50 hidden">
                      <div class="flex justify-center items-center h-full">
                          <div class="bg-secundary/90 p-6 rounded-lg w-1/3">
                              <h2 class="text-xl font-semibold mb-4 cascadia text-gray-300">Eliminar usuario</h2>
                              <p class="mb-4 cascadia text-gray-400">¿Deseas eliminar a {{ user.username }}?</p>
                              <div class="w-full h-auto justify-evenly items-center">
                                  <button onclick="closeModal2({{ user.id }})" class="bg-blue-500 text-white px-4 py-2 rounded">Cerrar</button>
                                  <form action="{{ url_for('desactivar_usuario', user_id=user.id) }}" method="POST" class="inline">
                                      <button type="submit" class="bg-red-600 text-white px-4 py-2 rounded">Eliminar</button>
                                  </form>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      {% endfor %}
        </div>  
    </div>
    </main>
    <footer class="mt-20 text-center text-gray-500 text-sm cascadia">
        © 2025 TuEmpresa. Todos los derechos reservados.
        <br><a href="/terminos" class="text-blue-500 hover:underline cascadia ">Términos y condiciones</a> |
        <a href="/privacidad" class="text-blue-500 hover:underline cascadia ">Política de privacidad</a>
    </footer>
    <script src="{{url_for('static', filename='js/main.js')}}"></script>
    <script src="{{url_for('static', filename='js/test.js')}}"></script>
</body>
</html>